
<div class="c1">
  <p *ngIf="game"><img src='{{game?game.background_img:"game poster path not found"}}'></p>
</div>

<div class="imgs-container" *ngIf="game">
  <div class="img-title"*ngIf="game">
    <img src="{{game.title_img}}" alt="" >
    <div class="game-desc">
      <span>About the game</span>
      <p>{{game.description}}</p>
    </div>
  </div>
  <div class="buy-info">
    <div class="d-flex fav-icon">
    <p class="title-text">{{game.title}}</p>
    <span *ngIf="isGameinFav(game) && isLoggedIn">
      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16" (click)="addToFavorites(userData.cart.id,game.id)">
        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
      </svg>
    </span>
    <span *ngIf="!isGameinFav(game) && isLoggedIn">
      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16" (click)="addToFavorites(userData.cart.id,game.id)">
        <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
      </svg>  </span>
      <span *ngIf="isGameinFav(game) && !isLoggedIn">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16" (click)="goToLogin()">
          <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
        </svg>
      </span>
      <span *ngIf="!isGameinFav(game) && !isLoggedIn">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16" (click)="goToLogin()">
          <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
        </svg>  </span>
    </div>
    <div class="subinfos">
      <a  routerLink="" class="platform steam">
        <div class="platform-steam">
          <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor"  class="bi bi-steam" viewBox="0 0 16 16">
              <path d="M.329 10.333A8.01 8.01 0 0 0 7.99 16C12.414 16 16 12.418 16 8s-3.586-8-8.009-8A8.006 8.006 0 0 0 0 7.468l.003.006 4.304 1.769A2.198 2.198 0 0 1 5.62 8.88l1.96-2.844-.001-.04a3.046 3.046 0 0 1 3.042-3.043 3.046 3.046 0 0 1 3.042 3.043 3.047 3.047 0 0 1-3.111 3.044l-2.804 2a2.223 2.223 0 0 1-3.075 2.11 2.217 2.217 0 0 1-1.312-1.568L.33 10.333Z"/>
              <path d="M4.868 12.683a1.715 1.715 0 0 0 1.318-3.165 1.705 1.705 0 0 0-1.263-.02l1.023.424a1.261 1.261 0 1 1-.97 2.33l-.99-.41a1.7 1.7 0 0 0 .882.84Zm3.726-6.687a2.03 2.03 0 0 0 2.027 2.029 2.03 2.03 0 0 0 2.027-2.029 2.03 2.03 0 0 0-2.027-2.027 2.03 2.03 0 0 0-2.027 2.027Zm2.03-1.527a1.524 1.524 0 1 1-.002 3.048 1.524 1.524 0 0 1 .002-3.048Z"/>
            </svg>
            </div>
        </div>
      {{game.platform}}
      <div class="spacer"></div>

    </a>
    <div class="stock" *ngIf="game.onStock">
      <div>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentcolor" class="bi bi-check-lg" viewBox="0 0 16 16">
          <path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/>
        </svg>
      </div>In stock
      <div class="spacer"></div>
    </div>
    <div class="stock" *ngIf="!game.onStock">
      <div>
        <!-- croce -->
      </div>Out of stock
      <div class="spacer"></div>
    </div>
    <div class="download">
      <div>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentcolor" class="bi bi-check-lg" viewBox="0 0 16 16">
          <path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/>
        </svg>
      </div>
       Digital download
      </div>
    </div>

    <div class="price-info">
      <span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-tag" viewBox="0 0 16 16">
        <path d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0z"/>
        <path d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1zm0 5.586 7 7L13.586 9l-7-7H2v4.586z"/>
      </svg><span class="full-price">{{game.full_price}}</span></span>
      <span class="percentage-discount">{{game.percentage_discount}}</span>
      <span class="discount-price">{{game.discount_price}}</span>
    </div>

    <div class="buy-buttons" *ngIf="isLoggedIn">
        <button class="buy-button" type="button" (click)="addToCart(userCart,game.id)"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-cart-check" viewBox="0 0 16 16">
          <path d="M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>
          <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
        </svg></button>
        <button class="buy-button bbtn2" (click)="goToCart(userCart,game.id)"> Buy now</button>
    </div>
    <div class="buy-buttons" *ngIf="!isLoggedIn">
      <button class="buy-button" type="button" (click)="goToLogin()"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-cart-check" viewBox="0 0 16 16">
        <path d="M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>
        <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
      </svg></button>
      <button class="buy-button bbtn2" (click)="goToLogin()"> Buy now</button>
  </div>

    <div class="specs">

      <div class="review-rating">
        <span class="rating">
          {{game.rating}}
        </span>
        <span class="count-text">Reviews count: </span>
        <span class="count-rating"> {{game.rating_count}}</span>
      </div>

      <div class="dev-info">
        <span>Rating: <span class="infos">PEGI 18</span></span><br>
        <span>Developer: <span class="infos">{{game.developer}}</span></span><br>
        <span>Publisher: <span class="infos">{{game.publisher}}</span></span><br>
        <span>Release date: <span class="infos">{{game.release_date}}</span> <br></span>
        <span>Genres: <a *ngFor="let item of game.genres" class="infos">{{item}} ;</a ></span>
      </div>

    </div>

  </div>
</div>

<div class="video-info"  *ngIf="game" >
  <iframe  [src]="game.video_trailer | autoplay | urlSanitizer" frameborder="0"></iframe>
</div>

<app-carousel-imgs [slides]="game.screenshots" *ngIf="game"></app-carousel-imgs>

<div class="specsx" *ngIf="game">

  <div class="specifics">
    <p class="specifiche">System requirements</p>
    <div *ngFor="let requirement of game.system_requirements">
      {{ requirement }}
    </div>
  </div>

  <div class="review d-none d-lg-block" *ngIf="isLoggedIn">
    <div class="blur-img">
    <p>Post a review!</p>
    <div>
      <span>
        Write your own review and let others know <br> what you think about the game!
      </span>
    </div>
    <button (click)="sendReview()" *ngIf="!reviewDone"> Review Time!</button>
    <button (click)="modifyReview(userReview)" *ngIf="reviewDone"> Update your Review!</button>
  </div>
  </div>
  <div class="review d-none d-lg-block" *ngIf="!isLoggedIn">
    <div class="blur-img">
    <p>Post a review!</p>
    <div>
      <span>
        Write your own review and let others know <br> what you think about the game!
      </span>
    </div>
    <button (click)="goToLogin()"> Review Time!</button>
  </div>
  </div>

</div>

<div class="reviews">
  <p class="reviews-text">
    Reviews from our users
  </p>
  <div class="reviews-box row m-2">
    <div *ngFor="let review of reviews" class="col-5 rounded-2 p-xl-4">
      <app-review [review]="review" [userData]="userData" [gameIdNumber]="gameIdNumber" (deleted)="deleted()" (popUpChange)="popUpChange()" (updateReview2)="updateReview2($event)"></app-review>
    </div>
  </div>
</div>
<app-review-popup [game]="game" [user]="userData" *ngIf="popUp" (closePopup)="popUp=false"  (addReview)="addReview($event)" [updateReview]="updateReview"></app-review-popup>
<app-footer></app-footer>

<!--[ngStyle]="{ 'background-image': 'url(' + game.poster_path + ')' }"-->
